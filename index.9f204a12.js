function r(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var t=document.querySelector(".game-score"),n=document.querySelector(".button"),o=document.querySelector(".message-start"),a=document.querySelector(".message-win"),i=document.querySelector(".message-lose"),l=function(r,e){return Math.floor(Math.random()*(e-r+1)+r)},c=function(r){for(var t=e(r),n=0;n<t.length;n++)for(var o=0;o<n;o++){var a=t[n][o];t[n][o]=t[o][n],t[o][n]=a}return t},u=function(){var r=[],e=document.querySelectorAll(".field-row"),t=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value,c=[],u=l.querySelectorAll(".field-cell"),f=!0,s=!1,d=void 0;try{for(var v,y=u[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var m=v.value;c.push(m)}}catch(r){s=!0,d=r}finally{try{f||null==y.return||y.return()}finally{if(s)throw d}}r.push(c)}}catch(r){n=!0,o=r}finally{try{t||null==i.return||i.return()}finally{if(n)throw o}}return r},f=function(){var r=u(),n=e([,,,,]).map(function(){return e([,,,,]).fill(0)}),o=0,f=function(e,t,n){r[t][n].className="field-cell field-cell--".concat(e),r[t][n].textContent=e},s=function(){for(var e=0;e<r.length;e++)for(var t=0;t<r.length;t++){if(n[e][t]){f(n[e][t],e,t);continue}r[e][t].className="field-cell",r[e][t].textContent=""}},d=function(){for(;;){var r=l(0,3),e=l(0,3);if(0===n[r][e]){var t=.1>Math.random()?4:2;n[r][e]=t,f(t,r,e);return}}},v=function(r){for(var t=r.filter(function(r){return r}),n=0;n<t.length-1;n++)t[n]===t[n+1]&&(t[n]=2*t[n],t.splice(n+1,1),o+=t[n]);return e(t).concat(e(Array(4-t.length).fill(0)))},y=function(){for(var r=0;r<4;r++){var e=n[r];n[r]=v(e)}},m=function(){for(var r=0;r<4;r++){var e=n[r].reverse();n[r]=v(e).reverse()}},h=function(){for(var r=c(n),e=0;e<4;e++){var t=r[e];r[e]=v(t)}n=c(r)},g=function(){for(var r=c(n),e=0;e<4;e++){var t=r[e].reverse();r[e]=v(t).reverse()}n=c(r)},S=function(){for(var r=0;r<4;r++)for(var e=0;e<4;e++)if(e+1<4&&n[r][e]===n[r][e+1]||r+1<4&&n[r][e]===n[r+1][e])return!0;return!1},b=function(r){var e=JSON.stringify(n);switch(r.key){case"ArrowLeft":y();break;case"ArrowRight":m();break;case"ArrowUp":h();break;case"ArrowDown":g()}e!==JSON.stringify(n)&&(s(),d(),t.textContent=o),n.flat().some(function(r){return 2048===r})&&a.classList.remove("hidden"),n.flat().some(function(r){return!r})||S()||(i.classList.remove("hidden"),document.removeEventListener("keydown",b))};s();for(var p=0;p<2;p++)d();document.addEventListener("keydown",b)};n.addEventListener("click",function(r){r.target.classList.remove("start"),r.target.classList.add("restart"),r.target.textContent="Restart",o.classList.add("hidden"),i.classList.add("hidden"),a.classList.add("hidden"),f()});
//# sourceMappingURL=index.9f204a12.js.map
